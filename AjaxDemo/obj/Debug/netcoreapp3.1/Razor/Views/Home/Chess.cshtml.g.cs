#pragma checksum "D:\Projects\csharp\AjaxDemo\AjaxDemo\Views\Home\Chess.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "c425c96c96173da8fa9dbcada7f96bbfbde9af74"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Chess), @"mvc.1.0.view", @"/Views/Home/Chess.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\Projects\csharp\AjaxDemo\AjaxDemo\Views\_ViewImports.cshtml"
using AjaxDemo;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Projects\csharp\AjaxDemo\AjaxDemo\Views\_ViewImports.cshtml"
using AjaxDemo.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"c425c96c96173da8fa9dbcada7f96bbfbde9af74", @"/Views/Home/Chess.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a0f3e4cbe6eb309e86714fefd12b695240b2864b", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Chess : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "0", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "1", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "2", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "3", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "4", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "5", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "D:\Projects\csharp\AjaxDemo\AjaxDemo\Views\Home\Chess.cshtml"
  
    ViewData["Title"] = "Chess";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"text-center\">\r\n\t<h1 class=\"display-4\">Chess test</h1>\r\n    <canvas id=\"canvas\" width=\"595\" height=\"595\"></canvas>\r\n    <select id=\"figure\">\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c425c96c96173da8fa9dbcada7f96bbfbde9af745113", async() => {
                WriteLiteral("King");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c425c96c96173da8fa9dbcada7f96bbfbde9af746278", async() => {
                WriteLiteral("Queen");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c425c96c96173da8fa9dbcada7f96bbfbde9af747444", async() => {
                WriteLiteral("Bishop");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c425c96c96173da8fa9dbcada7f96bbfbde9af748611", async() => {
                WriteLiteral("Knight");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c425c96c96173da8fa9dbcada7f96bbfbde9af749778", async() => {
                WriteLiteral("Rook");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_4.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c425c96c96173da8fa9dbcada7f96bbfbde9af7410943", async() => {
                WriteLiteral("Pawn");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_5.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_5);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
    </select>
    <script>
    	var values = {0: ""king"", 1: ""queen"", 2: ""bishop"", 3: ""knight"", 4: ""rook"", 5: ""pawn""};
        var isSecondClick = false;
        var first = {x: 0, y: 0};
        var second = {x: 0, y: 0};
        var canv = document.getElementById(""canvas"");
        
        function destinationAddress() {
        	return `/Home/GetInfo?type=${values[document.getElementById(""figure"").value]}&x1=${first.x}&y1=${first.y}&x2=${second.x}&y2=${second.y}`;
        }
        
        
        function canvasClick(sent) {
        	let mousePos = getMousePos(canv, sent);
        	let result = {
        	    x: Math.floor((mousePos.x -40) / 64),
        	    y: Math.floor((mousePos.y -40) / 64)
        	}; 
			drawFigure(result);
        	if(isSecondClick) {
        		second = result;
        		ajaxRequest(destinationAddress());
        	}
        	else
        		first = result;
        	isSecondClick = !isSecondClick;
        }

        function drawFigure(coords) {
   ");
            WriteLiteral(@"     	let img = new Image();
        	img.src = ""https://coloring.otk7.com/admin/uploads_n/uploads/7/6/1//43323.png"";
        	let shift = figure.value;
        	img.onload = function () {
        		let ctx = canv.getContext(""2d"");
        		ctx.drawImage(img, 106*shift, 0, 106, 105, 40 + coords.x*64, 40 + coords.y*64, 64, 64);
        	};
        }


        function getMousePos(canvas, evt) {
        	let rect = canvas.getBoundingClientRect();
        	return {
        		x: evt.clientX - rect.left,
        		y: evt.clientY - rect.top - 0.125
        	}
        }
        
        
        function ajaxRequest(destinationAddress) {
            let a = new XMLHttpRequest();
            a.open(""GET"", destinationAddress);
            a.send();
            a.onreadystatechange = function() {
                if(a.readyState === 4) {
                	console.log(first.x + "", "" + first.y + "" and "" + second.x + "", "" + second.y);
                	console.log(destinationAddress);
            ");
            WriteLiteral(@"    	console.log(a.responseText);
                	if(a.responseText === ""true"") 
		        		alert(""Отличный ход!"");
                	else
                		alert(""Так не бывает!"");
                	setTimeout(drawtable, 500);
                }
            };
        };
                
        function drawtable() {
            let ctx = canv.getContext(""2d"");
            ctx.clearRect(0, 0, canv.width, canv.height);
            ctx.font = ""24px serif"";
            let black = new Image();
            black.src = ""https://i.pinimg.com/originals/4e/a0/cc/4ea0cc3e88f97d06d18f61055352a4b4.jpg"";
            let white = new Image();
            white.src = ""https://i1.rozetka.ua/goods/8471753/32778839_images_8471753866.jpg"";
            
            ctx.strokeStyle = '#000000'; // меняем цвет рамки
            ctx.strokeRect(30, 30, 532, 532);
            ctx.strokeRect(36, 36, 520, 520);
            ctx.strokeRect(2, 2, canv.width-2, canv.height-2);
            black.onload = function() {");
            WriteLiteral(@"
            	ctx.drawImage(black, 40, 40, 512, 512);
            	white.onload = function() {
					for (i=0; i<8; i+=2) {
						ctx.strokeText(i + 1, 8, 15 + 64 + 2*i*32);
						ctx.strokeText(i + 2, 8, 15 + 2*64 + 2*i*32);
						for (j=0; j<8; j+=2) {
							ctx.strokeText(String.fromCharCode(71 - i + 1), 64 + 2*i*32, 22);
							ctx.strokeText(String.fromCharCode(71 - i), 2*64 + 2*i*32, 22);
							ctx.drawImage(white, 40 + i*64, 40 + j*64, 64, 64, 40 + i*64, 40 + j*64, 64, 64);
							ctx.drawImage(white, 40 + (i+1)*64, 40 + (j+1)*64, 64, 64, 40 + (i+1)*64, 40 + (j+1)*64, 64, 64);
							ctx.strokeText(String.fromCharCode(71 - i + 1), 64 + 2*i*32, canv.height - 10);
							ctx.strokeText(String.fromCharCode(71 - i), 2*64 + 2*i*32, canv.height - 10);
						}	
						ctx.strokeText(i + 1, canv.width - 24, 15 + 64 + 2*i*32);
						ctx.strokeText(i + 2, canv.width - 24, 15 + 2*64 + 2*i*32);
					}
            	}
            };
        }
        
        function onload() {
			drawtable();");
            WriteLiteral("  \r\n            canv.addEventListener(\"click\", evt => canvasClick(evt), false);\r\n        }\r\n        \r\n        onload();\r\n    </script>\r\n</div>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
